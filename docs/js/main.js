let n=[],r=[];const s=document.querySelector(".js_productsList"),u=document.querySelector(".js_notFoundSpan"),p=document.querySelector(".js_searchBtn"),d=document.querySelector(".js_inputContent"),i=document.querySelector(".js_shoppingCart");function l(o){let e="";for(let t of o)e+=`
    <li class="js_product" id="${t.id}">
      <img src="${t.image}" alt="${t.title}"></img>
      <p>${t.title}</p>
      <p>${t.price} â‚¬</p>
      <button class="purchaseBtn js_purchaseBtn">Buy</button>
    </li>
    `;return e}function m(o){const e=n.find(t=>t.id===parseInt(o));r.push(e),a(),i.innerHTML=l(r)}function L(o){const e=r.findIndex(t=>t.id===parseInt(o));e!==-1&&(r.splice(e,1),a()),i.innerHTML=l(r)}function a(){localStorage.removeItem("cartLocal"),localStorage.removeItem("productsHtmlLocal"),localStorage.setItem("cartLocal",JSON.stringify(r)),localStorage.setItem("productsHtmlLocal",s.innerHTML)}localStorage.getItem("productsHtmlLocal")===null?(console.log("Obteniendo datos de servidor"),fetch("https://raw.githubusercontent.com/Adalab/resources/master/apis/products.json").then(o=>o.json()).then(o=>(n=o,s.innerHTML=l(n),localStorage.setItem("allProducts",JSON.stringify(n)),localStorage.setItem("productsHtmlLocal",s.innerHTML),o))):(console.log("Obteniendo datos de localStorage"),n=JSON.parse(localStorage.getItem("allProducts")),s.innerHTML=localStorage.getItem("productsHtmlLocal"));localStorage.getItem("cartLocal")!==null&&(console.log("Leyendo carrito de localStorage"),r=JSON.parse(localStorage.getItem("cartLocal")),i.innerHTML=l(r));p.addEventListener("click",o=>{s.innerHTML="",u.classList.add("hidden");let e=[],t=0;for(let c of n)c.title.toLowerCase().includes(d.value.toLowerCase())&&(e.push(c),t++,d.placeholder="Results: "+t);s.innerHTML=l(e),t===0&&u.classList.remove("hidden"),d.value=""});s.addEventListener("click",o=>{o.preventDefault();const e=o.target;if(e.classList.contains("purchaseBtn")){const t=e.parentNode,c=e;c.classList.add("deleteBtn"),c.classList.remove("purchaseBtn"),c.textContent="Remove",t.classList.add("productSelected"),a(),m(t.id)}else if(e.classList.contains("deleteBtn")){const t=e.parentNode,c=e;c.classList.remove("deleteBtn"),c.classList.add("purchaseBtn"),c.textContent="Buy",t.classList.remove("productSelected"),a(),L(t.id)}});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXMiOltdLCJzb3VyY2VzQ29udGVudCI6W10sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7In0=
